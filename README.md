# Esse_helper_bot — Telegram-бот «Помощник с сочинениями»

## Описание проекта
**Esse_bot** — это Telegram-бот, который помогает учащимся писать сочинения, исправлять ошибки, улучшать текст и работать по плану, который задаёт пользователь.  
Бот использует AI через OpenRouter и pydantic_ai, сохраняет историю взаимодействий в базе данных и может напоминать пользователю о необходимости продолжить работу над текстом.

## Актуальность

Современным школьникам всё чаще приходится писать сочинения или эссе однако многие испытывают трудности с формулировками и грамотностью. 
Не всегда есть возможность обратиться к учителю или репетитору, поэтому возникает потребность в доступном, круглосуточном помощнике, 
который может объяснить ошибки, предложить идеи и помочь сформировать качественный текст. Telegram-бот с ИИ закрывает эту потребность: он помогает учиться писать лучше, 
развивает навыки письменной речи и делает процесс подготовки к экзаменам и учебным заданиям проще и эффективнее.

# Технологии

- **aiogram** — Telegram API
- **SQLAlchemy (SQLite)** — ORM
- **OpenRouter API** — подключение ИИ
- **pydantic_ai** — система AI-агентов
- **pydantic** — модели и валидация

# Структура проекта

```text
Esse_bot/
├── bot/
│   ├── bot.py
│   └── handlers.py
├── ai/
│   ├── ai.py
│   └── agent.py
├── database/
│   ├── db_session.py
│   └── models.py
├── config/
│   ├── settings.py
│   └── answers.py
├── utils/
│   └── reminders.py
└── main.py
```

# Функционал бота

## Основные возможности
- Генерация сочинений на любую тему
- Написание текста по плану, который даёт пользователь
- Исправление ошибок: орфографических, пунктуационных, синтаксических
- Улучшение текста: стиль, качество, логика
- Объяснение ошибок и обучение написанию
- Создание идей, тезисов и аргументов

## Дополнительные функции
- Сохранение истории сообщений
- Сохранение написанных или исправленных текстов
- Приветственное меню и кнопки в стиле «привет-привет»

---

# Задачи проекта

## 1. База данных (SQLAlchemy)

### Модели:
- **User** — данные пользователя
- **Message** — сообщения пользователей
- **Essay** — сочинения

### Реализовать:
- `db_session.py` — engine + инициация session
- Автоматическое создание БД
- Сохранение истории диалога

---

## 2. Telegram API (aiogram)

### Реализовать:
- Получение токена от BotFather
- Создание объекта `Bot` и `Dispatcher`
- Приветственное меню и кнопки
- Обработчики команд:
  - `/start`
  - `/help`
  - Написание сочинения
  - Проверка/исправление текста
  - Улучшение текста
- Логирование ошибок


## 3. AI-интеграция (OpenRouter + pydantic_ai)

### Реализовать:
- Хранение API-ключа в `.env`
- Создание клиента для OpenRouter
- Выбор модели
- Создание агентов через pydantic_ai
- Логика взаимодействия 2-х агентов
- Управление промптами и контекстами

# Безопасность
- хранение ключей в `.env`
- контроль ролей (Admin, User)
- защита API-ключей

## Экспорт
- сохранение сочинений в бд
- отправка сочинения файлом или сообщением

##  Логи
- лог запросов в AI
- лог напоминаний
- лог ошибок Telegram API

# ️ main.py

В файле `main.py`:
- инициализация БД  
- запуск диспетчера
- старт бота  

## Возможные пользовательские сценарии

### 1. Написание сочинения с нуля
Пользователь вводит тему или выбирает её из меню, выбирает или отправляет план, после чего бот формирует связный и грамотный текст нужного объёма..

### 2. Проверка и улучшение текста
Пользователь отправляет своё сочинение, а бот исправляет ошибки, улучшает стиль, делает текст более логичным и при необходимости объясняет внесённые изменения.


